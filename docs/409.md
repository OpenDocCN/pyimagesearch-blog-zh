# 什么是光学字符识别(OCR)？

> 原文：<https://pyimagesearch.com/2021/08/09/what-is-optical-character-recognition-ocr/>

**光学字符识别，简称**或 **OCR** ，是用来描述将 ***图像*** **文本转换为** ***机器编码*** **文本的算法和技术(既有电子的也有机械的)。我们通常认为 OCR 是一种软件。也就是说，这些系统:**

1.  接受输入图像(扫描、拍摄或计算机生成)
2.  自动检测文本并像人一样“阅读”它
3.  将文本转换成机器可读的格式，以便在更大的计算机视觉系统范围内进行搜索、索引和处理

## 什么是光学字符识别(OCR)？

然而，OCR 系统也可以是*机械*和*物理*。例如，你可能很熟悉电子铅笔，当你写 T5 时，**会自动扫描你的笔迹。一旦你写完了，你把笔连接到你的电脑(通用串行总线(USB)，蓝牙，或其他)。然后，OCR 软件会分析智能笔记录的动作和图像，生成机器可读的文本。**

如果你使用过任何一种光学字符识别系统，不管是像宇宙魔方这样的软件还是一种物理光学字符识别设备，你都会知道光学字符识别系统离精确还有很大的差距。但这是为什么呢？从表面上看，OCR 是一个如此简单的想法，可以说是整个*计算机视觉领域中最简单的。**拍摄文本图像，并将其转换为机器可读的文本，以便软件对其进行操作**。然而，自从 20 世纪 60 年代计算机视觉领域开始以来( [Papert，1966](https://dspace.mit.edu/handle/1721.1/6125) )，研究人员一直在努力*创造通用的 OCR 系统，在通用的用例中工作。**

**简单的事实是，OCR 是** ***硬的。***

人类通过书写交流的方式有很多细微差别——我们有自然语言处理(NLP)的所有问题，加上计算机视觉系统在从图像中读取一段文本时永远不会获得 100%的准确性。噪点、文笔、画质等方面的变量太多。我们离解决 OCR 还有很长的路要走。

如果 OCR 已经被解决了，这个教程就不会存在了——你的第一个谷歌搜索会带你找到你需要的软件包，你可以毫不费力地自信而准确地将 OCR 应用到你的项目中。但这不是我们生活的世界。虽然我们在解决 OCR 问题方面做得越来越好，但仍然需要一个熟练的从业者来理解如何操作现有的 OCR 工具。这就是本教程存在的原因——我迫不及待地想和你一起踏上这段旅程。

## 学习目标

在本教程中，您将:

1.  了解什么是 OCR
2.  接受一堂简短的 OCR 历史课
3.  发现 OCR 的常见真实应用
4.  了解 OCR 与方向和文字检测(OSD)之间的区别，OSD 是许多最先进的 OCR 引擎中的常见组件
5.  了解图像预处理和后处理对改善 OCR 结果的重要性

**要了解什么是 OCR，熟悉 OCR 工具，** ***只要坚持阅读。***

## OCR 简介

我们将从 OCR 的简史开始这一部分，包括这个计算机视觉子领域是如何产生的。接下来，我们将回顾 OCR 的一些实际应用(其中一些我们将在教程中构建)。然后，我们将简要讨论 OSD 的概念，它是任何 OCR 系统的基本组件。本教程的最后一部分将介绍图像预处理和 OCR 结果后处理的概念，这是两种用于提高 OCR 准确性的常用技术。

### OCR 简史

早期的 [OCR](https://en.wikipedia.org/wiki/Optical_character_recognition) 技术是纯机械的，可以追溯到 1914 年*“伊曼纽尔·戈德堡(Emanuel Goldberg)开发了一种可以读取字符，然后将其转换成标准电报代码的机器”* ( [Dhavale，2017，第 91 页](https://books.google.co.in/books?id=InFxDgAAQBAJ))。戈德堡在 20 世纪 20 年代和 30 年代继续他的研究，当时他开发了一个搜索缩微胶片(按比例缩小的文件，通常是电影、报纸、杂志等)的系统。)中的字符，然后进行 OCR 识别。

1974 年， [Ray Kurzweil 和 Kurzweil Computer Products，Inc.](https://en.wikipedia.org/wiki/Optical_character_recognition#Blind_and_visually_impaired_users) 继续开发 OCR 系统，主要致力于创造一种“盲人阅读机器”库兹韦尔的工作引起了行业领导者施乐的注意，施乐希望将该软件进一步商业化，并开发用于文档理解的 OCR 应用程序。

惠普实验室从 20 世纪 80 年代开始研究宇宙魔方。惠普的工作在 2005 年被开源，迅速成为世界上最受欢迎的 OCR 引擎。宇宙魔方库很可能是你现在阅读这篇教程的原因。

随着深度学习在 2010 年代彻底改变了计算机视觉领域(以及几乎所有其他计算机科学领域)，OCR 准确性从称为长短期记忆(LSTM)网络的专门架构中获得了巨大的提升。

现在，在 21 世纪 20 年代，我们看到 OCR 已经越来越多地被科技巨头商业化，例如谷歌、T2、微软、T4、亚马逊等等。我们生活在计算机科学领域的一个奇妙时代——以前我们从未有过如此强大和准确的 OCR 系统。但事实仍然是，这些 OCR 引擎*仍然*需要一个有知识的计算机视觉从业者来操作。这篇课文将教你如何做到这一点。

### 光学字符识别的应用

OCR 的应用有很多，其初衷是为盲人创造阅读机器( [Schantz，1982](https://www.amazon.com/dp/0943072018/?tag=internetarchi-20) )。从那时起，OCR 应用程序已经发生了*的重大变化*，包括(但不限于):

*   自动牌照/车牌识别(ALPR/ANPR)
*   交通标志识别
*   分析并击败网站上的验证码(区分计算机和人类的完全自动化的公共图灵测试)
*   从名片中提取信息
*   自动读取护照的机器可读区(MRZ)和其他相关部分
*   解析银行支票中的银行代号、帐号和货币金额
*   理解自然场景中的文本，例如从智能手机拍摄的照片

如果输入图像中有文本，我们很可能会对其应用 OCR—*我们需要知道使用哪种技术！*

### 方向和脚本检测

在我们详细讨论 OCR 之前，我们需要简单介绍一下**方向和文字检测(OSD)** ，我们将在以后的教程中详细介绍。如果 OCR 是获取输入图像并以*人类可读*和*机器可读*两种格式返回文本的过程，那么 OSD 就是分析图像的文本元数据的过程，**特别是** ***方向*** **和** ***脚本/书写风格。***

文本的**方向**是输入图像中文本的角度(以度为单位)。为了获得更高的 OCR 准确性，我们可能需要应用 OSD 来确定文本方向，纠正它，然后应用 OCR。

脚本和写作风格是指一套字符和符号用于书面和打字交流。我们大多数人都熟悉拉丁字符，它构成了许多欧洲和西方国家使用的字符和符号；然而，还有许多其他形式的写作风格被广泛使用，包括阿拉伯语、希伯来语、汉语等等。拉丁字符与阿拉伯语非常不同，而阿拉伯语又不同于日本汉字，后者是一种用汉字书写的系统。

OCR 系统可以对特定的文字或书写系统做出的任何规则、启发或假设都将使 OCR 引擎*在应用于给定的文字时更加准确*。因此，我们可以使用 OSD 信息作为提高 OCR 准确性的前兆。

### 预处理和后处理的重要性

如果您可以应用计算机视觉和图像处理技术来清理您的图像，许多 OCR 引擎(无论是 Tesseract 还是基于云的 API)都会更加准确。

例如，考虑**图** **1** 。作为人类，我们可以在**图** **1** *(左上)*中看到文本*“12-14”*，但是如果您通过 Tesseract OCR 引擎运行相同的图像，您将得到*“12:04”*(*底部*)。

然而，如果您要应用一些基本的图像处理操作，如阈值处理、距离变换和形态学操作，您最终会得到一个清晰的图像(**图** **1** 、*右上*)。当我们通过 Tesseract 传递清理后的图像时，我们正确地获得了文本*“12-14。”*

我看到计算机视觉和深度学习从业者犯的最常见的错误之一是，他们*假设*他们正在利用的 OCR 引擎是*也是*一种广义的图像处理器，能够*自动*清理他们的图像。由于 Tesseract OCR 引擎的进步，OCR 系统*可以*进行自动分割和页面分析；然而，这些系统远没有人类那么聪明，人类几乎可以即时解析复杂背景中的文本。

OCR 引擎应该像四年级学生一样被对待，他们能够阅读文本，并且经常需要正确方向的推动。

作为一名计算机视觉和深度学习从业者，使用你的 CV/DL 知识来*协助*OCR 引擎是*你的*责任。请记住，如果先对一段文本进行适当的清理和分割，OCR 系统识别这段文本会容易得多*。*

你还应该考虑对你的 OCR 文本进行后处理。OCR 系统永远不会 100%准确，所以你应该假设会有一些错误。要做到这一点，问问自己是否有可能应用规则和启发法。一些需要考虑的示例问题:

*   我可以应用自动拼写检查来纠正 OCR 过程中拼错的单词吗？
*   我能否利用正则表达式来确定输出 OCR 数据中的模式，并仅提取*我感兴趣的信息(如发票中的日期或价格)？*
*   我能否利用我的领域知识来创建启发法，自动为我更正 OCR 文本？

创建一个成功的 OCR 应用程序一部分是科学，一部分是艺术。让我们换个话题，谈谈成为一名成功的 OCR 从业者所需的工具。

## **用于 OCR 的工具、库和包**

在构建我们的光学字符识别(OCR)项目之前，我们首先需要熟悉我们可用的 OCR 工具。

教程的这一部分将回顾我们将在本课中使用的主要 OCR 引擎、软件和 API。这些工具将作为我们构建 OCR 项目的基础。

## **发现 OCR 工具和 API**

在本教程的其余部分，您将:

1.  探索宇宙魔方 OCR 引擎，世界上最受欢迎的 OCR 软件包
2.  了解 Python 和`pytesseract`库如何使用 Tesseract 进行推理
3.  了解计算机视觉和图像处理算法对 OCR 准确性的影响
4.  发现可用于 OCR 的基于云的 API

## **OCR 工具和库**

我们将从简要讨论 Tesseract OCR 引擎开始本节教程，tessera CT OCR 引擎是一个 OCR 包，最初开发于 20 世纪 80 年代，经历了多次修订和更新，现在是世界上最流行的 OCR 系统。

当然，如果 Tesseract 只能用作命令行工具，它就没什么用了——我们的编程语言需要 API 来与它交互。幸运的是，几乎每一种流行的编程语言(Java、C/C++、PHP 等)都有可用的宇宙魔方绑定。)，但是我们将使用 Python 编程语言。

Python 不仅是一种简单(且宽容)的编码语言，而且被许多计算机视觉和深度学习从业者使用，非常适合 OCR。为了通过 Python 与 Tesseract OCR 引擎交互，我们将使用`pytesseract`。但是，光靠宇宙魔方和`pytesseract`是不够的。OCR 的准确性倾向于*严重依赖于*我们能够多好地“清理”我们的输入图像，让 Tesseract 更容易对它们进行 OCR。

为了清理和预处理我们的图像，我们将使用 OpenCV，即用于计算机视觉和图像处理的事实上的标准库。我们还将使用机器学习和深度学习 Python 库，包括 scikit-learn、scikit-image、Keras、TensorFlow 等。，来训练我们的自定义 OCR 模型。最后，我们将简要回顾一下基于云的 OCR APIs，我们将在本教程的后面部分进行介绍。

### **宇宙魔方**

Tesseract OCR 引擎最初是由惠普(HP)实验室在 20 世纪 80 年代开发的闭源软件。惠普在 OCR 项目中使用了 Tesseract，大部分 Tesseract 软件都是用 c 语言编写的。然而，当 Tesseract 最初开发时，*很少对软件进行更新、修补或加入最新的 OCR 算法。宇宙魔方虽然仍在使用，但基本上处于休眠状态，直到 2005 年被开源。2006 年，谷歌开始赞助开发[宇宙魔方](https://en.wikipedia.org/wiki/Tesseract_(software))。你可能会在**图 2** 中认出宇宙魔方的标志。*

2000 年代后期，传统的 Tesseract 用户和谷歌的赞助为该项目带来了新的生命，允许 OCR 软件更新、修补和添加新功能。**最突出的新功能出现在 2018 年 10 月** [**宇宙魔方 v4**](https://tesseract-ocr.github.io/tessdoc/ReleaseNotes#tesseract-release-notes-oct-29-2018---v400) **发布时，其中包括一个新的基于长短期记忆(LSTM)网络的深度学习 OCR 引擎**。新的 LSTM 引擎提供了*显著的准确性增益*，使得准确的 OCR 文本成为可能，即使在恶劣的非最佳条件下。

此外，新的 LSTM 引擎接受了超过 123 种语言的训练，使其更容易识别除英语之外的其他语言文本(包括基于脚本的语言，如中文、阿拉伯语等)。).长期以来，宇宙魔方一直是开源 OCR 的*事实上的*标准，随着 v4 的发布，我们现在看到*甚至有更多的*计算机视觉开发人员使用这个工具。如果您有兴趣了解如何将 OCR 应用到您的项目中，您需要知道如何操作 Tesseract OCR 引擎。

### **Python**

我们将在本教程的所有例子中使用 [Python](https://www.python.org/) 编程语言。Python 是一门容易学习的语言。它也是用于计算机视觉、机器学习和深度学习的最广泛使用的语言——这意味着我们需要的任何额外的计算机视觉/深度学习功能都只是一种`import`陈述方式。因为 OCR 本质上是一个计算机视觉问题，所以使用 Python 编程语言是一个自然的选择。

### 中小企业〔t1〕

[pytesserac](https://github.com/madmaze/pytesseract)是由[马蒂亚斯·李](https://matthiaslee.com/)开发的 Python 包，他是计算机科学博士，专注于软件工程性能。PyTesseract 库是一个 Python 包，它与`tesseract`命令行二进制文件接口。仅使用一两个函数调用，我们就可以轻松地将 Tesseract OCR 应用到我们的 OCR 项目中。

### **OpenCV**

为了提高我们的 OCR 准确性，我们需要利用计算机视觉和图像处理来“清理”我们的输入图像，使 Tesseract 更容易正确地对图像中的文本进行 OCR。

为了方便我们的计算机视觉和图像处理操作，我们将使用 [OpenCV 库](https://www.drdobbs.com/open-source/the-opencv-library/184404319#)，即*事实上的*计算机视觉和图像处理标准。OpenCV 库提供了 Python 绑定，这使得它自然地适合我们的 OCR 生态系统。OpenCV 的标志如图**图 3** 所示。

### **Keras, TensorFlow, and scikit-learn**

有时应用基本的计算机视觉和图像处理操作不足以获得足够的 OCR 准确度。到那时，我们将需要应用机器学习和深度学习。

scikit-learn 库是用 Python 训练机器学习模型时使用的标准包。Keras 和 TensorFlow 在一个易于使用的 API 中为我们提供了深度学习的所有功能。您可以在**图 4** 中看到这些工具的标志。

### **云 OCR API**

有时候，再多的图像处理/清理和镶嵌选项的组合也无法为我们提供准确的 OCR 结果:

*   也许宇宙魔方从来没有在你的输入图像的字体上训练过
*   也许没有预先训练好的“现成”模型可以正确地定位图像中的文本
*   或者，开发一个定制的 OCR 管道可能会花费太多的精力，而您正在寻找捷径

当这些类型的场景出现时，您应该考虑使用基于云的 OCR APIs，如微软 Azure 认知服务、亚马逊 Rekognition 和谷歌云平台(GCP) API。常用 API 的标志如图**图 5** 所示。这些 API 是在*大规模*文本数据集上训练的，潜在地允许你用*的一小部分*的努力准确地 OCR 复杂的图像。

当然，缺点是:

1.  这些都是付费的 API，意味着你需要付费才能使用它们
2.  向他们提交图像和检索结果需要互联网连接
3.  网络连接意味着在提交图像和获得 OCR 结果之间会有延迟，这使得它可能无法用于实时应用
4.  您并不“拥有”整个 OCR 管道。您将被锁定到您用于 OCR 的供应商。

也就是说，在开发 OCR 项目时，这些 OCR APIs 会非常有用，所以我们将在后面的教程中介绍它们。

## **总结**

在本教程中，向您介绍了光学字符识别(OCR)领域。从我的经验来看，我可以证明 **OCR 表面上看起来很容易，但当你需要开发一个工作系统**时，它绝对是一个 ***具有挑战性的*** **领域。请记住，计算机视觉领域已经存在了 50 多年，然而研究人员还没有创造出高度精确的通用 OCR 系统。我们当然离著名的云服务提供商 API 越来越近了，但我们还有很长的路要走。**

您还了解了 OCR 中常用的工具、编程语言和库。如果您对可用的工具数量感到不知所措，*不要担心*，我们将有条不紊地构建每一个工具，将您的知识从 OCR 初学者逐步提升到有经验的 OCR 从业者，他们有信心将 OCR 应用到您的项目中。